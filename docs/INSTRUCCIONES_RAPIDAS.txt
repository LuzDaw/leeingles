================================================================================
INSTRUCCIONES RÃPIDAS - SISTEMA DE RECUPERACIÃ“N DE CONTRASEÃ‘A
================================================================================

ESTADO: âœ“ Cambios Aplicados
FECHA:  29 de Diciembre de 2025

================================================================================
1. VERIFICAR QUE LOS CAMBIOS SE APLICARON CORRECTAMENTE
================================================================================

Accede a:
  http://localhost/traductor/verificar_cambios.php

Este pÃ¡gina:
  âœ“ Verifica que email_handler.php tiene puerto 587
  âœ“ Verifica que estÃ¡ configurado TLS
  âœ“ Verifica que funciÃ³n sendEmail() estÃ¡ definida
  âœ“ Verifica que logging estÃ¡ configurado
  âœ“ Verifica que utilidades_email.php incluye email_handler.php
  âœ“ Y mÃ¡s verificaciones...

Si todo estÃ¡ verde (âœ“ OK), continÃºa al paso 2.
Si hay errores (âœ— ERROR), revisa la secciÃ³n "TROUBLESHOOTING" al final.

================================================================================
2. PRUEBA DE ENVÃO DE EMAIL
================================================================================

Accede a:
  http://localhost/traductor/test_email_config.php

En el panel:
  1. Lee la "ConfiguraciÃ³n Actual del Servidor SMTP" (debe ser puerto 587, TLS)
  2. En "Prueba de EnvÃ­o de Email", introduce tu email
  3. Haz clic en "Enviar Email de Prueba"
  4. Espera la respuesta (Ã©xito o error)
  5. Los logs se actualizan automÃ¡ticamente (cada 3 segundos)

Si ves un email en tu bandeja de entrada (o spam), Â¡FUNCIONA!

================================================================================
3. PRUEBA DEL SISTEMA COMPLETO
================================================================================

Ahora prueba el sistema real:

  1. Ve al sitio web
  2. Haz clic en "OlvidÃ© mi contraseÃ±a"
  3. Introduce el email de tu cuenta
  4. Haz clic en "Enviar enlace de restablecimiento"
  5. Revisa tu bandeja de entrada (incluyendo spam)

Si recibes el email de restablecimiento, Â¡TODO FUNCIONA!

================================================================================
4. REVISAR LOS LOGS SI HAY PROBLEMAS
================================================================================

Archivo de logs:
  c:/xampp/htdocs/leeingles/logs/email_debug.log

Contenido tÃ­pico (Ã©xito):
  [2025-12-29 14:30:45] Iniciando envÃ­o de email a: usuario@email.com
  [2025-12-29 14:30:45] ConfiguraciÃ³n SMTP establecida (Host: leeingles.com, Puerto: 587, MÃ©todo: TLS)
  [2025-12-29 14:30:46] Email enviado exitosamente a usuario@email.com

Los logs tambiÃ©n se ven en tiempo real en:
  http://localhost/traductor/test_email_config.php (Archivo de Log de DepuraciÃ³n)

================================================================================
TROUBLESHOOTING - ERRORES COMUNES
================================================================================

ERROR: "No se pudo conectar con el servidor de emails"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Causas posibles:
  1. Puerto 587 bloqueado en el servidor de hosting
  2. Servicio SMTP inactivo en leeingles.com
  3. Problema de conectividad de red

Soluciones:
  a) Verificar conectividad SMTP (desde servidor de hosting):
     telnet leeingles.com 587
     
     Si se conecta: deberÃ­a ver "220 mail.leeingles.com ESMTP"
     Si no conecta: el puerto estÃ¡ bloqueado/servicio inactivo

  b) Probar con puerto 465 (SSL alternativo):
     - En email_handler.php, lÃ­nea 30: cambiar Port = 587 a Port = 465
     - En email_handler.php, lÃ­nea 33: cambiar SMTPSecure = 'tls' a SMTPSecure = 'ssl'
     - Volver a probar en test_email_config.php

  c) Contactar con proveedor de hosting:
     - Confirmar que puerto 587 estÃ¡ abierto
     - Solicitar configuraciÃ³n SMTP recomendada
     - Pedir acceso a logs de servidor de email


ERROR: "AutenticaciÃ³n fallida" o similar
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Causas posibles:
  1. Usuario o contraseÃ±a incorrectos
  2. Cuenta SMTP no activa

Verificar:
  - Usuario: info@leeingles.com
  - ContraseÃ±a: Holamundo25__
  - Sin espacios ni caracteres especiales extras

Si es correcto:
  - Contactar proveedor de hosting
  - Solicitar cambiar contraseÃ±a SMTP
  - Verificar que usuario estÃ¡ activo


ERROR: "Respuesta invÃ¡lida del servidor"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Esto significa que el cÃ³digo estÃ¡ recibiendo respuesta corrupta.

Posibles causas:
  1. DepuraciÃ³n de PHPMailer activa (pone texto en salida)
  2. Errores de PHP en los archivos
  3. Problemas de caracteres especiales

Soluciones:
  a) Revisar si hay output de depuraciÃ³n en logs
  b) Revisar email_handler.php lÃ­nea 56-58 (debe estar comentado o deshabilitado SMTPDebug)
  c) Revisar que test_email_config.php carga correctamente


ERROR: "Certificado SSL no vÃ¡lido" o similar
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Esto ocurre si la validaciÃ³n SSL estÃ¡ habilitada y hay problema con certificado.

Soluciones:
  a) En email_handler.php estÃ¡ deshabilitada la validaciÃ³n (para testing)
  b) Si sigue errando, revisar certificado de leeingles.com
  c) En producciÃ³n, habilitar: verify_peer = true


EMAIL NO LLEGA, VA A SPAM O DEMORA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Esto es NORMAL en los primeros envÃ­os.

Recomendaciones:
  1. Revisa bandeja de SPAM/Correo no deseado
  2. Los primeros emails pueden ser marcados como spam
  3. El servidor de leeingles.com podrÃ­a tener reputaciÃ³n baja
  4. Demora de minutos es normal (depende del servidor)

Si persiste:
  - Contactar proveedor de hosting
  - Solicitar revisar autenticaciÃ³n SPF/DKIM/DMARC
  - Considerar usar servicio externo (SendGrid, Mailgun, etc.)

================================================================================
5. ARCHIVOS CLAVE A REVISAR
================================================================================

Si necesitas entender los cambios:

  ğŸ“„ README_CAMBIOS_EMAIL.md
     Resumen ejecutivo de todos los cambios

  ğŸ“„ CAMBIOS_EMAIL_REALIZADOS.md
     DocumentaciÃ³n tÃ©cnica detallada

  ğŸ“ CÃ³digo modificado:
     - email_handler.php
     - logueo_seguridad/utilidades_email.php
     - logueo_seguridad/solicitar_restablecimiento_contrasena.php

  ğŸ§ª Herramientas de diagnÃ³stico:
     - test_email_config.php          (Panel de pruebas interactivo)
     - verificar_cambios.php          (Validador automÃ¡tico)

  ğŸ“Š Logs:
     - logs/email_debug.log           (Eventos SMTP)

================================================================================
6. CHECKLIST - Â¿QUE REVISAR?
================================================================================

Antes de reportar problema:

  [ ] Â¿Ejecutaste verificar_cambios.php? Â¿EstÃ¡ todo verde?
  [ ] Â¿Intentaste enviar email de prueba en test_email_config.php?
  [ ] Â¿Revisaste los logs en test_email_config.php?
  [ ] Â¿Probaste olvidÃ© contraseÃ±a en el sitio web?
  [ ] Â¿Revisaste bandeja de spam/correo no deseado?
  [ ] Â¿Esperaste algunos minutos? (los emails pueden demorar)
  [ ] Â¿El puerto 587 estÃ¡ abierto en el servidor? (telnet test)

Si respondiste SÃ a todas y sigue sin funcionar:
  â†’ Contactar proveedor de hosting con logs de error (de test_email_config.php)

================================================================================
7. CAMBIOS RESUMIDOS
================================================================================

Antes:                          DespuÃ©s:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Puerto: 465                     Puerto: 587
Cifrado: SSL                    Cifrado: TLS
Logging: Ninguno                Logging: AutomÃ¡tico
ValidaciÃ³n: MÃ­nima              ValidaciÃ³n: Robusta
Arquitectura: HTTP Proxy        Arquitectura: InclusiÃ³n directa

================================================================================
8. CONTACTO / SOPORTE
================================================================================

Si necesitas ayuda:

1. Revisar CAMBIOS_EMAIL_REALIZADOS.md (secciÃ³n Troubleshooting)
2. Acceder a test_email_config.php y revisar logs detallados
3. Verificar que puerto 587 estÃ¡ abierto (telnet leeingles.com 587)
4. Contactar proveedor de hosting con:
   - Error especÃ­fico
   - Logs de test_email_config.php
   - ConfiguraciÃ³n SMTP actual

================================================================================
FIN DE INSTRUCCIONES RÃPIDAS
================================================================================

Ãšltima actualizaciÃ³n: 29-12-2025
Estado: âœ“ Cambios aplicados correctamente
